import telebot
import random
import os
import requests
from config import TG_TOKEN

bot = telebot.TeleBot(TG_TOKEN)

# –ù–∞—à –±–∞–Ω–∫ –∑–∞–¥–∞–Ω–∏–π
TASKS = [
    "–°–¥–∞–π 10 –±–∞—Ç–∞—Ä–µ–µ–∫ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç –ø—Ä–∏–µ–º–∞. üîã",
    "–°–¥–∞–π 5 –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –±—É—Ç—ã–ª–æ–∫ –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É. ‚ôªÔ∏è",
    "–ö—É–ø–∏ –ø—Ä–æ–¥—É–∫—Ç—ã —Å–µ–≥–æ–¥–Ω—è –±–µ–∑ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–ª–∞—Å—Ç–∏–∫–æ–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞. üõçÔ∏è",
    "–ü—Ä–∏–≥–æ—Ç–æ–≤—å –¥–æ–º–∞—à–Ω–µ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è —É–±–æ—Ä–∫–∏ (–∏–∑ —É–∫—Å—É—Å–∞ –∏–ª–∏ —Å–æ–¥—ã). üßº",
    "–û—Ç–∫–∞–∂–∏—Å—å –æ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π —Ç—Ä—É–±–æ—á–∫–∏ –≤ –∫–∞—Ñ–µ –∏–ª–∏ –∫—É–ø–∏ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—É—é. ü•§",
    "–ù–∞–π–¥–∏ –±–ª–∏–∂–∞–π—à–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–µ–∫–ª–∞ –∏ —Å–¥–∞–π —Ç—É–¥–∞ –±—É—Ç—ã–ª–∫–∏. üçæ",
    "–ü–æ—Ç—Ä–∞—Ç—å 15 –º–∏–Ω—É—Ç, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π —è—â–∏–∫ —Å –º–∞–∫—É–ª–∞—Ç—É—Ä–æ–π. üì¶",
    "–ö—É–ø–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ–≤–æ—â/—Ñ—Ä—É–∫—Ç –±–µ–∑ —É–ø–∞–∫–æ–≤–∫–∏ –Ω–∞ —Ä–∞–∑–≤–µ—Å. üçé",
    "–ò—Å–ø–æ–ª—å–∑—É–π –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –ª–∏—Å—Ç–∞ –±—É–º–∞–≥–∏ –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ –∏–ª–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏–∏. üìÑ",
    "–ü–æ—á–∏–Ω–∏ –æ–¥–Ω—É —Å–ª–æ–º–∞–Ω–Ω—É—é –≤–µ—â—å –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å. üõ†Ô∏è"
]

# –°–ø–∏—Å–æ–∫ –ø–æ—Ö–≤–∞–ª –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
ACHIEVEMENTS = [
    "–¢—ã ‚Äî —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π –ø–ª–∞–Ω–µ—Ç—ã! üåç‚ú®",
    "–ú–∞—Å—Ç–µ—Ä —ç–∫–æ–ª–æ–≥–∏—á–Ω–æ—Å—Ç–∏! üèÜ",
    "–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏! ‚ôªÔ∏èüëë",
    "–ó–∞—â–∏—Ç–Ω–∏–∫ –ø—Ä–∏—Ä–æ–¥—ã! üåøüõ°Ô∏è",
    "–≠–∫–æ-–ª–µ–≥–µ–Ω–¥–∞! ü§©",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä —á–∏—â–µ! üí´",
    "–í–µ–ª–∏–∫–∏–π –∏–∑–±–∞–≤–∏—Ç–µ–ª—å –æ—Ç –º—É—Å–æ—Ä–∞! üóëÔ∏è‚ö°",
]

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@bot.message_handler(commands=['start'])
def send_welcome(message):
    welcome_text = """
–ü—Ä–∏–≤–µ—Ç! üå± –Ø —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã–π –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—ë—Ç –∑–∞–¥–∞–Ω–∏–µ! –ó–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π —è –¥–∞—é —Ç–µ–±–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ)

–í–æ—Ç —á—Ç–æ —è —É–º–µ—é:
/task - –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ —ç–∫–æ–∑–∞–¥–∞–Ω–∏–µ
/done - –°–æ–æ–±—â–∏—Ç—å –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è
/mission - –£–∑–Ω–∞—Ç—å –æ –Ω–∞—à–µ–π –º–∏—Å—Å–∏–∏
/refuse - –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∑–∞–¥–∞–Ω–∏—è (—è –±—ã –Ω–µ —Å–æ–≤–µ—Ç–æ–≤–∞–ª —ç—Ç–æ –¥–µ–ª–∞—Ç—å)

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å! üòä
    """
    bot.reply_to(message, welcome_text)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /task
@bot.message_handler(commands=['task'])
def give_task(message):
    random_task = random.choice(TASKS)
    task_message = f"üöÄ –¢–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:\n\n{random_task}\n\n–ù–∞–ø–∏—à–∏ –º–Ω–µ '—Å–¥–µ–ª–∞–ª' –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—à—å!"
    bot.reply_to(message, task_message)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /done
@bot.message_handler(commands=['done'])
def task_done(message):
    random_praise = random.choice(ACHIEVEMENTS)
    celebration_message = f"""
üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!

{random_praise}

–¢—ã —Å—Ç–∞–ª –Ω–∞ —à–∞–≥ –±–ª–∏–∂–µ –∫ —ç–∫–æ–ª–æ–≥–∏—á–Ω–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏! üåü

–•–æ—á–µ—à—å –µ—â–µ –∑–∞–¥–∞–Ω–∏–µ? –ù–∞–ø–∏—à–∏ /task
    """
    bot.reply_to(message, celebration_message)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /mission
@bot.message_handler(commands=['mission'])
def send_mission(message):
    mission_text = """
–ù–∞—à–∞ –º–∏—Å—Å–∏—è: üåç
–ü–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º –Ω–µ–±–æ–ª—å—à–∏–º–∏ —à–∞–≥–∞–º–∏ —É–º–µ–Ω—å—à–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ö–æ–¥–æ–≤.
–ö–∞–∂–¥–æ–µ –º–∞–ª–µ–Ω—å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ!
–í–º–µ—Å—Ç–µ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –ø–ª–∞–Ω–µ—Ç—É —á–∏—â–µ. üíö
    """
    bot.reply_to(message, mission_text)

@bot.message_handler(commands=['refuse'])
def send_refuse(message):
    refuse_text = """
–ê—Ö —Ç—ã –Ω–µ–≥–æ–¥—è–π! –ì—Ä–µ—à–Ω–∏–∫! –ù–ï –ü–û–†–¢–¨ –ü–õ–ê–ù–ï–¢–£!!! –ü–û–ó–ê–ë–û–¢–¨–°–Ø –û –ú–ò–†–ï –ò –û–ö–†–£–ñ–ê–Æ–©–ï–ô –°–†–ï–î–ï!!!
    """
    bot.reply_to(message, refuse_text)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—ã—á–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
@bot.message_handler(func=lambda message: True)
def handle_all_messages(message):
    user_text = message.text.lower()
    
    if any(word in user_text for word in ['–ø—Ä–∏–≤–µ—Ç', 'hello', 'hi', 'start']):
        send_welcome(message)
    elif any(word in user_text for word in ['–∑–∞–¥–∞–Ω–∏–µ', '–∑–∞–¥–∞—á—É', 'task', '—á—Ç–æ –¥–µ–ª–∞—Ç—å']):
        give_task(message)
    elif any(word in user_text for word in ['—Å–¥–µ–ª–∞–ª', '–≤—ã–ø–æ–ª–Ω–∏–ª', '–≥–æ—Ç–æ–≤–æ', 'done', '–≥–æ—Ç–æ–≤', '—É—Å–ø–µ—Ö']):
        task_done(message)
    elif any(word in user_text for word in ['–º–∏—Å—Å–∏—è', '—Ü–µ–ª—å', 'mission']):
        send_mission(message)
    elif any(word in user_text for word in ['–Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª', '—Ü–µ–ª—å –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞', '–Ω–µ —Ö–æ—á—É', '–æ—Ç–∫–∞–∑','—Ñ—É']):
        send_refuse(message)
    else:
        bot.reply_to(message, "–ù–µ –ø–æ–Ω—è–ª —Ç–µ–±—è üòä –ù–∞–ø–∏—à–∏ /task –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –∏–ª–∏ /done –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—à—å!")

bot.polling()
